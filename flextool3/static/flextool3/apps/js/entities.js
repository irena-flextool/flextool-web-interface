(function(e){function t(t){for(var r,c,o=t[0],u=t[1],l=t[2],d=0,b=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&b.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(b.length)b.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={entities:0},i=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var s=u;i.push([3,"chunk-vendors"]),n()})({"0274":function(e,t,n){"use strict";var r=n("649f");function a(e,t,n,a,i,c){var o=Object(r["N"])("n-spin"),u=Object(r["N"])("n-result");return"loading"===n.state?(Object(r["G"])(),Object(r["i"])(o,{key:0})):"error"===n.state?(Object(r["G"])(),Object(r["i"])(u,{key:1,status:"error",title:"Error",description:n.errorMessage},null,8,["description"])):"waiting"===n.state?Object(r["M"])(e.$slots,"waiting",{key:2}):Object(r["M"])(e.$slots,"default",{key:3})}var i={props:{state:{type:String,required:!0},errorMessage:{type:String,required:!1,default:""}},state:{loading:"loading",waiting:"waiting",ready:"ready",error:"error"}},c=n("e582"),o=n.n(c);const u=o()(i,[["render",a]]);t["a"]=u},"1d6d":function(e,t,n){"use strict";var r=n("649f");function a(e,t,n,a,i,c){var o=Object(r["N"])("n-input");return Object(r["G"])(),Object(r["i"])(o,{value:a.value,"onUpdate:value":t[0]||(t[0]=function(e){return a.value=e}),ref:"instance",onBlur:a.cancel,onKeydown:a.handleKey,maxlength:"155",size:"small",clearable:""},null,8,["value","onBlur","onKeydown"])}n("a01d"),n("0151");var i=n("a8ce"),c={props:{name:String},emits:["accept","cancel"],setup:function(e,t){var n=Object(i["f"])(e.name),r=Object(i["f"])(null);return Object(i["e"])((function(){var e;null===(e=r.value)||void 0===e||e.select()})),{instance:r,value:n,cancel:function(){n.value=e.name,t.emit("cancel")},handleKey:function(r){var a=n.value.trim();switch(r.key){case"Enter":a&&a!==e.name?t.emit("accept",a):(n.value=e.name,t.emit("cancel"));break;case"Escape":n.value=e.name,t.emit("cancel");break}}}}},o=n("e582"),u=n.n(o);const l=u()(c,[["render",a]]);t["a"]=l},2225:function(e,t,n){"use strict";n("810a")},3:function(e,t,n){e.exports=n("c30c")},"315d":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"p",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"m",(function(){return j})),n.d(t,"l",(function(){return O})),n.d(t,"v",(function(){return m})),n.d(t,"n",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"r",(function(){return h})),n.d(t,"q",(function(){return g})),n.d(t,"u",(function(){return E})),n.d(t,"s",(function(){return N})),n.d(t,"t",(function(){return w})),n.d(t,"o",(function(){return k})),n.d(t,"w",(function(){return I})),n.d(t,"k",(function(){return V})),n.d(t,"b",(function(){return S}));var r=n("0312");n("ca00"),n("8261"),n("0151"),n("4254"),n("4f18"),n("dad8"),n("b2a6");function a(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var a=n[r].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}var i=a("csrftoken");function c(){return{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":i,"Content-Type":"application/json"}}}function o(e){var t=c();return t["body"]=JSON.stringify({type:"project list?"}),fetch(e,t).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load project list: ".concat(e))}))}))}function u(e,t){var n=c();return n["body"]=JSON.stringify({type:"create project?",name:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to create project: ".concat(e))}))}))}function l(e,t){var n=c();return n["body"]=JSON.stringify({type:"destroy project?",id:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to delete project: ".concat(e))}))}))}function s(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=c();return i["body"]=JSON.stringify(Object(r["a"])({type:e,projectId:t},a)),fetch(n,i).then((function(t){return t.ok?t.json():t.text().then((function(t){throw new Error("Failed to fetch ".concat(e,": ").concat(t))}))}))}function d(e,t,n,a){var i=c();return i.body=JSON.stringify(Object(r["a"])({type:"commit",projectId:n,message:t},e)),fetch(a,i).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))}))}function b(e,t){var n=c();return n.body=JSON.stringify({type:"current execution?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch current run: ".concat(e))}))}))}function f(e,t,n){var r=c();return r["body"]=JSON.stringify({type:"execute?",projectId:e,scenarios:n}),fetch(t,r).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to execute: ".concat(e))}))}))}function p(e,t){var n=c();return n["body"]=JSON.stringify({type:"abort?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to abort execution: ".concat(e))}))}))}function j(e,t){var n=c();return n["body"]=JSON.stringify({type:"briefing?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch execution status: ".concat(e))}))}))}function m(e,t,n){var r=c();return r.body=JSON.stringify({type:"summary?",projectId:e,scenarioExecutionId:n}),fetch(t,r).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load summary: ".concat(e))}))}))}function v(e,t,n){var r=c();return r.body=JSON.stringify({type:"output directory?",projectId:e,scenarioExecutionId:n}),fetch(t,r).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load output directory path: ".concat(e))}))}))}function O(e,t){var n=c();return n.body=JSON.stringify({type:"scenario list?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load scenarios: ".concat(e))}))}))}function y(e,t,n){var r=c();return r.body=JSON.stringify({type:"destroy execution?",projectId:e,scenarioExecutionId:n}),fetch(t,r).then((function(e){if(!e.ok)return e.text().then((function(e){throw new Error("Failed to destroy scenario execution: ".concat(e))}))}))}function h(e,t){var n=c();return n.body=JSON.stringify({type:"entity classes?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch entity classes: ".concat(e))}))}))}function g(e,t,n){var r=c();return r.body=JSON.stringify({type:"entities?",projectId:e,classes:n}),fetch(t,r).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch entities: ".concat(e))}))}))}function E(e,t,n){var r=c();return r.body=JSON.stringify({type:"parameters?",projectId:e,classes:n}),fetch(t,r).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch parameters: ".concat(e))}))}))}function N(e,t,n,r,a){var i=c();return i.body=JSON.stringify({type:"value indexes?",projectId:e,scenarioExecutionIds:n,classes:r,parameters:a}),fetch(t,i).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch parameter value indexes: ".concat(e))}))}))}function w(e,t,n,r,a,i){var o=c();return o.body=JSON.stringify({type:"values?",projectId:e,scenarioExecutionIds:n,classes:r,objects:a,parameters:i}),fetch(t,o).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch parameter values: ".concat(e))}))}))}function k(e,t){var n=c();return n.body=JSON.stringify({type:"plot specification?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to fetch plot specification: ".concat(e))}))}))}function I(e,t,n){var r=c();return r.body=JSON.stringify({type:"store plot specification",projectId:e,specification:n}),fetch(t,r).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to store plot specification: ".concat(e))}))}))}function V(e,t){var n=c();return n["body"]=JSON.stringify({type:"example list?",projectId:e}),fetch(t,n).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to load example list: ".concat(e))}))}))}function S(e,t,n){var r=c();return r["body"]=JSON.stringify({type:"add to model",name:n,projectId:e}),fetch(t,r).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error("Failed to add example to model: ".concat(e))}))}))}},3196:function(e,t,n){},4258:function(e,t,n){"use strict";n("c593")},"703f":function(e,t,n){"use strict";function r(e){e?addEventListener("beforeunload",a,{capture:!0}):removeEventListener("beforeunload",a,{capture:!0})}function a(e){return e.preventDefault(),e.returnValue="There are uncommitted changes."}n.d(t,"a",(function(){return r}))},"810a":function(e,t,n){},"8e39":function(e,t,n){"use strict";var r=n("649f"),a=Object(r["m"])("Delete");function i(e,t,n,i,c,o){var u=Object(r["N"])("n-button");return Object(r["G"])(),Object(r["i"])(u,{size:"tiny",onClick:i.emitDelete},{default:Object(r["V"])((function(){return[a]})),_:1},8,["onClick"])}var c={props:{emblem:{type:[String,Array],required:!0}},emits:["delete"],setup:function(e,t){return{emitDelete:function(){t.emit("delete",e.emblem)}}}},o=n("e582"),u=n.n(o);const l=u()(c,[["render",i]]);t["a"]=l},9973:function(e,t,n){"use strict";n("a01d");var r=n("649f"),a={class:"page-content"},i={class:"page-content"};function c(e,t,n,c,o,u){var l=Object(r["N"])("navigation-menu"),s=Object(r["N"])("n-card"),d=Object(r["N"])("n-layout-header"),b=Object(r["N"])("n-layout");return Object(r["G"])(),Object(r["i"])(b,{position:"absolute"},{default:Object(r["V"])((function(){return[Object(r["n"])(d,null,{default:Object(r["V"])((function(){return[Object(r["n"])(s,{size:"small"},{default:Object(r["V"])((function(){return[Object(r["n"])(l,{current:n.name,"index-url":n.indexUrl,"project-url":n.projectUrl,"edit-url":n.editUrl,"run-url":n.runUrl,"results-url":n.resultsUrl,"logout-url":n.logoutUrl,"logo-url":n.logoUrl},null,8,["current","index-url","project-url","edit-url","run-url","results-url","logout-url","logo-url"])]})),_:1}),Object(r["l"])("div",a,[Object(r["M"])(e.$slots,"header")])]})),_:3}),Object(r["l"])("div",i,[Object(r["M"])(e.$slots,"default")])]})),_:3})}var o=Object(r["m"])("User guide"),u=Object(r["m"])(" Log out ");function l(e,t,n,a,i,c){var l=Object(r["N"])("n-image"),s=Object(r["N"])("n-menu"),d=Object(r["N"])("n-space"),b=Object(r["N"])("n-a"),f=Object(r["N"])("n-divider"),p=Object(r["N"])("n-button");return Object(r["G"])(),Object(r["i"])(d,{justify:"space-between",align:"baseline"},{default:Object(r["V"])((function(){return[Object(r["n"])(d,{align:"start"},{default:Object(r["V"])((function(){return[Object(r["n"])(l,{src:n.logoUrl,alt:"FlexTool",width:90,"preview-disabled":""},null,8,["src"]),Object(r["n"])(s,{"default-value":n.current,mode:"horizontal",options:a.links},null,8,["default-value","options"])]})),_:1}),Object(r["n"])(d,{align:"baseline"},{default:Object(r["V"])((function(){return[Object(r["n"])(b,{href:"https://irena-flextool.github.io/flextool/"},{default:Object(r["V"])((function(){return[o]})),_:1}),Object(r["n"])(f,{vertical:""}),Object(r["n"])(p,{onClick:a.logout},{default:Object(r["V"])((function(){return[u]})),_:1},8,["onClick"])]})),_:1})]})),_:1})}var s=n("a8ce"),d=n("d70b");function b(e,t){return function(){return Object(s["c"])(d["a"],{href:t},(function(){return e}))}}function f(e){var t={Projects:e.indexUrl,"Manage project":e.projectUrl,"Edit model":e.editUrl,Run:e.runUrl,Results:e.resultsUrl},n=[];for(var r in t){var a=t[r],i=null!==a,c=i?b(r,a):r;n.push({label:c,key:r,disabled:!i})}return n}var p={props:{current:{type:String,required:!0},indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!1,default:null},editUrl:{type:String,required:!1,default:null},runUrl:{type:String,required:!1,default:null},resultsUrl:{type:String,required:!1,default:null},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},setup:function(e){var t=f(e),n=Object(s["f"])(null);return{links:t,activeKey:n,logout:function(){location.assign(e.logoutUrl)}}}},j=n("e582"),m=n.n(j);const v=m()(p,[["render",l]]);var O=v,y={props:{name:{type:String,required:!0},indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!1,default:null},editUrl:{type:String,required:!1,default:null},runUrl:{type:String,required:!1,default:null},resultsUrl:{type:String,required:!1,default:null},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},components:{"navigation-menu":O}};n("2225");const h=m()(y,[["render",c]]);t["a"]=h},bc2a:function(e,t,n){"use strict";n("3196")},c30c:function(e,t,n){"use strict";n.r(t);n("b2c9"),n("2ae8"),n("b75d"),n("ce9f");var r=n("a8ce"),a=n("937e"),i=n("649f"),c=Object(i["m"])("Alternatives");function o(e,t,n,r,a,o){var u=Object(i["N"])("page-path"),l=Object(i["N"])("n-h1"),s=Object(i["N"])("n-p"),d=Object(i["N"])("commit-button"),b=Object(i["N"])("n-h2"),f=Object(i["N"])("entity-list"),p=Object(i["N"])("n-space"),j=Object(i["N"])("alternative-selection"),m=Object(i["N"])("n-layout-sider"),v=Object(i["N"])("parameter-table"),O=Object(i["N"])("n-grid-item"),y=Object(i["N"])("indexed-value-editor"),h=Object(i["N"])("n-grid"),g=Object(i["N"])("n-layout-content"),E=Object(i["N"])("n-layout"),N=Object(i["N"])("page");return Object(i["G"])(),Object(i["i"])(N,{name:"Edit model","index-url":n.indexUrl,"project-url":n.projectUrl,"edit-url":n.editUrl,"run-url":n.runUrl,"results-url":n.resultsUrl,"logout-url":n.logoutUrl,"logo-url":n.logoUrl},{header:Object(i["V"])((function(){return[Object(i["n"])(u,{path:[{name:"Projects",url:n.indexUrl},{name:n.projectName,url:n.projectUrl},{name:"Model",url:n.editUrl}],"leaf-name":n.className},null,8,["path","leaf-name"]),Object(i["n"])(l,null,{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.className),1)]})),_:1}),Object(i["W"])(Object(i["n"])(s,null,{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.classDescription),1)]})),_:1},512),[[i["S"],"None"!==n.classDescription]]),Object(i["n"])(d,{"has-pending-changes":r.pendingChanges,committing:r.committing,"error-message":r.commitErrorMessage,onCommitRequest:r.commit},null,8,["has-pending-changes","committing","error-message","onCommitRequest"])]})),default:Object(i["V"])((function(){return[Object(i["n"])(E,{id:"main-layout","has-sider":"",position:"absolute"},{default:Object(i["V"])((function(){return[Object(i["n"])(m,{width:r.siderWidth},{default:Object(i["V"])((function(){return[Object(i["n"])(p,null,{default:Object(i["V"])((function(){return[Object(i["n"])(p,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(b,null,{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(r.entityTypeName),1)]})),_:1}),Object(i["n"])(f,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"class-name":n.className,"class-type":n.classType,inserted:r.insertedEntities,onEntitySelect:r.setSelectedEntity,onEntityInsert:r.storeEntityInsertion,onEntityUpdate:r.storeEntityUpdate,onEntityDelete:r.storeEntityDeletion,onRelationshipsClash:r.setRelationshipsClashErrorState,onEntityDimensionsReveal:r.setEntityDimensions},null,8,["project-id","model-url","class-id","class-name","class-type","inserted","onEntitySelect","onEntityInsert","onEntityUpdate","onEntityDelete","onRelationshipsClash","onEntityDimensionsReveal"])]})),_:1}),Object(i["n"])(p,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(b,null,{default:Object(i["V"])((function(){return[c]})),_:1}),Object(i["n"])(j,{"project-id":n.projectId,"model-url":n.modelUrl,onAlternativeSelect:r.setSelectedAlternative},null,8,["project-id","model-url","onAlternativeSelect"])]})),_:1})]})),_:1})]})),_:1},8,["width"]),Object(i["n"])(g,{"content-style":"margin-left: 1em; margin-right: 1em"},{default:Object(i["V"])((function(){return[Object(i["n"])(h,{cols:"1 m:2",responsive:"screen"},{default:Object(i["V"])((function(){return[Object(i["n"])(O,null,{default:Object(i["V"])((function(){return[Object(i["n"])(v,{"project-id":n.projectId,"model-url":n.modelUrl,"class-id":n.classId,"entity-key":r.currentEntityKey,diff:r.pendingModelChanges,onOpenValueEditorRequest:r.setValueEditorData,onCloseValueEditorRequest:r.possiblyClearValueEditor,onValueInsert:r.storeValueInsertion,onValueUpdate:r.storeValueUpdate,onValueDelete:r.storeValueDeletion},null,8,["project-id","model-url","class-id","entity-key","diff","onOpenValueEditorRequest","onCloseValueEditorRequest","onValueInsert","onValueUpdate","onValueDelete"])]})),_:1}),Object(i["n"])(O,null,{default:Object(i["V"])((function(){return[Object(i["n"])(y,{"value-data":r.valueEditorData,diff:r.pendingModelChanges,onValueUpdate:r.storeValueUpdate},null,8,["value-data","diff","onValueUpdate"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["index-url","project-url","edit-url","run-url","results-url","logout-url","logo-url"])}var u=n("0312"),l=(n("f2d5"),n("4f18"),n("a253")),s=n("274c"),d=n("315d"),b=n("2341"),f=n("e83a"),p=n("cc33"),j=n("c86a"),m=n("6f2c"),v=n("1f45");n("d6a1"),n("5385"),n("4c87"),n("5ee3"),n("66a1"),n("3865"),n("ca00"),n("8261"),n("0151"),n("a01d"),n("dad8"),n("ff84");function O(e){if(!e.trim())return null;var t=parseFloat(e);return isNaN(t)?"NAN"===e.toUpperCase()?t:e:t}n("cf25");function y(e,t){return e+"_"+t.join("__")}function h(e,t){return"string"===typeof t?t:y(e,t)}var g=Symbol("insert action"),E=Symbol("delete action"),N=Symbol("update action"),w=Object(m["a"])((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(v["a"])(this,e),this.action=t,this.parameters=new Map}));function k(e,t){var n=e.parameters.get(t);return void 0===n&&(n=new Map,e.parameters.set(t,n)),n}function I(e){if("object"!==Object(j["a"])(e)||!("content"in e))return e;var t=[];return e.content.split("\n").forEach((function(e){if(e=e.trim(),e){var n=e.split(/\s+/);1===n.length?t.push(O(n[0])):t.push([n[0],O(n[1])])}})),!t||t[0].length>1?{type:"map",index_type:"str",index_name:e.index_name,data:t}:{type:"array",value_type:"number"===typeof t[0]?"float":"str",data:t}}var V=new WeakMap,S=new WeakMap,_=new WeakMap,x=function(){function e(t,n){Object(v["a"])(this,e),Object(b["a"])(this,V,{writable:!0,value:void 0}),Object(b["a"])(this,S,{writable:!0,value:void 0}),Object(b["a"])(this,_,{writable:!0,value:void 0}),Object(p["a"])(this,V,t),Object(p["a"])(this,S,n),Object(p["a"])(this,_,new Map)}return Object(m["a"])(e,[{key:"makeCommitData",value:function(){var e=[],t=[],n=[],r=[],a=[],i=[],c=[],o=[],u=[];return Object(f["a"])(this,_).forEach((function(i,l){var s=i.action;if(s)if(s.action===g)void 0===s.objectNames?e.push({name:s.name}):r.push({name:s.name,object_name_list:s.objectNames});else{if(s.action!==N){if(s.action===E)return void n.push(s.id);throw Error("Unknown object action.")}void 0===s.objects?t.push({id:s.id,name:s.name}):a.push({id:s.id,name:s.name,object_name_list:s.objects})}i.parameters.forEach((function(e,t){e.forEach((function(e,n){e.action===g?c.push({entity_name:l,definition_id:t,alternative_id:n,value:I(e.value)}):e.action===N?o.push({id:e.id,value:I(e.value)}):e.action===E&&u.push(e.id)}))}))})),{class_id:Object(f["a"])(this,V),insertions:{object:e,relationship:r,parameter_value:c},updates:{object:t,relationship:a,parameter_value:o},deletions:{object:n,relationship:i,parameter_value:u}}}},{key:"isPending",value:function(){return Object(f["a"])(this,_).size>0}},{key:"clearPending",value:function(){Object(f["a"])(this,_).clear()}},{key:"getPendingEntity",value:function(e){var t=h(Object(f["a"])(this,S),e),n=Object(f["a"])(this,_).get(t);return void 0===n&&(n=new w,Object(f["a"])(this,_).set(t,n)),n}},{key:"insertEntity",value:function(e){if("string"===typeof e)Object(f["a"])(this,_).set(e,new w({action:g,name:e}));else{var t=y(Object(f["a"])(this,S),e);Object(f["a"])(this,_).set(t,new w({action:g,name:t,objectNames:e}))}}},{key:"updateEntity",value:function(e,t,n){var r=function(e,t){return void 0===e||e.action===N&&t!==e.originalName};if("string"===typeof n){var a=Object(f["a"])(this,_).get(e);void 0===a?Object(f["a"])(this,_).set(n,new w({action:N,id:t,name:n,originalName:e})):r(a.action,n)?a.action={action:N,id:t,name:n,originalName:a.action.originalName}:a.action.action===g&&(a.action.name=n)}else{var i=y(Object(f["a"])(this,S),e),c=y(Object(f["a"])(this,S),n),o=Object(f["a"])(this,_).get(i);void 0===o?Object(f["a"])(this,_).set(c,new w({action:N,id:t,name:c,objects:n,originalName:i,originalObjects:e})):r(o.action,c)?o.action={action:N,id:t,name:c,objects:n,originalName:i,originalEmblem:e}:o.action.action===g&&(o.action.name=c,o.action.objectNames=n)}}},{key:"deleteEntity",value:function(e,t){var n=h(Object(f["a"])(this,S),t),r=Object(f["a"])(this,_).get(n);void 0===r?Object(f["a"])(this,_).set(n,new w({action:E,id:e})):void 0===r.action||r.action.action!==g?(r.action={action:E,id:e},r.parameters.clear()):Object(f["a"])(this,_).delete(n)}},{key:"insertValue",value:function(e,t,n,r){var a=h(Object(f["a"])(this,S),t),i=this.getPendingEntity(a),c={action:g,entity_name:a,definition_id:n,alternative_id:r,value:e},o=k(i,n);o.set(r,c)}},{key:"updateValue",value:function(e,t,n,r,a){var i=this.getPendingEntity(n),c=k(i,r),o=void 0;o=void 0===t?{action:g,entity_name:h(Object(f["a"])(this,S),n),definition_id:r,alternative_id:a,value:e}:{action:N,id:t,value:e},c.set(a,o)}},{key:"deleteValue",value:function(e,t,n,r){var a=this.getPendingEntity(t),i=k(a,n);void 0===e?(i.delete(r),0===i.size&&(a.parameters.delete(n),0===a.parameters.size&&void 0===a.action&&Object(f["a"])(this,_).delete(t))):i.set(r,{action:E,id:e})}},{key:"pendingValue",value:function(e,t,n){var r=h(Object(f["a"])(this,S),e),a=Object(f["a"])(this,_).get(r);if(void 0!==a){var i=a.parameters.get(t);if(void 0!==i){var c=i.get(n);return void 0!==c?c.value:void 0}}}},{key:"isPendingDeletion",value:function(e,t,n){var r=h(Object(f["a"])(this,S),e),a=Object(f["a"])(this,_).get(r);if(void 0===a)return!1;var i=a.parameters.get(t);if(void 0===i)return!1;var c=i.get(n);return void 0!==c&&i.get(n).action===E}}]),e}(),U=n("703f"),q=n("f77a");function C(e,t,n,r,a,c){var o=Object(i["N"])("n-tree"),u=Object(i["N"])("new-named-item-row"),l=Object(i["N"])("entity-list-new-relationship-row"),s=Object(i["N"])("n-space"),d=Object(i["N"])("fetchable");return Object(i["G"])(),Object(i["i"])(d,{state:r.state,"error-message":r.errorMessage},{default:Object(i["V"])((function(){return[Object(i["n"])(s,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(o,{selectable:"","block-node":"",data:r.entityList,"render-label":r.renderLabel,"render-suffix":r.renderSuffix,"selected-keys":r.selectedKeys,size:"tiny","onUpdate:selectedKeys":r.emitEntitySelect},null,8,["data","render-label","render-suffix","selected-keys","onUpdate:selectedKeys"]),1===n.classType?(Object(i["G"])(),Object(i["i"])(u,{key:0,"item-name":"object",onCreate:r.addObject},null,8,["onCreate"])):(Object(i["G"])(),Object(i["i"])(l,{key:1,"available-objects":r.availableObjects,onRelationshipCreate:r.addRelationship},null,8,["available-objects","onRelationshipCreate"]))]})),_:1})]})),_:1},8,["state","error-message"])}var D=n("8f57"),G=n("51c8"),R=n("b655"),M=n("39a3");n("0997"),n("4d96"),n("e014"),n("c6fb");function A(e,t){return"string"===typeof e?e===t:K(e,t)}function K(e,t){for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0}var J=n("0274");function P(e,t,n,r,a,c){var o=Object(i["N"])("n-text"),u=Object(i["N"])("item-name-input"),l=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(l,{align:"baseline"},{default:Object(i["V"])((function(){return[r.editing?(Object(i["G"])(),Object(i["i"])(u,{key:1,name:n.objectName,onAccept:r.emitRename,onCancel:r.hideInput},null,8,["name","onAccept","onCancel"])):(Object(i["G"])(),Object(i["i"])(o,{key:0,onDblclick:r.showInput},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.objectName),1)]})),_:1},8,["onDblclick"]))]})),_:1})}var F=n("1d6d"),z={props:{objectName:{type:String,required:!0},objectId:{type:Number,required:!1}},emits:["rename"],components:{"item-name-input":F["a"]},setup:function(e,t){var n=Object(r["f"])(!1),a=Object(r["f"])(null);return{editing:n,inputInstance:a,showInput:function(){n.value=!0},hideInput:function(){n.value=!1},emitRename:function(r){n.value=!1,t.emit("rename",{id:e.objectId,previousEmblem:e.objectName,entityEmblem:r})}}}},T=n("e582"),L=n.n(T);const B=L()(z,[["render",P]]);var $=B;function W(e,t,n,r,a,c){var o=Object(i["N"])("entity-list-relationship-object"),u=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(u,{align:"baseline"},{default:Object(i["V"])((function(){return[(Object(i["G"])(!0),Object(i["k"])(i["b"],null,Object(i["L"])(n.objects,(function(e,t){return Object(i["G"])(),Object(i["i"])(o,{"object-name":e,"object-names-clash":n.objectNamesClash,dimension:t,"available-objects":n.availableObjects[t],key:t,onAccept:r.emitObjectsUpdate},null,8,["object-name","object-names-clash","dimension","available-objects","onAccept"])})),128))]})),_:1})}function X(e,t,n,r,a,c){var o=Object(i["N"])("n-tag"),u=Object(i["N"])("entity-list-relationship-object-input");return r.editing?(Object(i["G"])(),Object(i["i"])(u,{key:1,"object-name":n.objectName,"available-objects":n.availableObjects,onAccept:r.accept,onCancel:r.hideInput},null,8,["object-name","available-objects","onAccept","onCancel"])):(Object(i["G"])(),Object(i["i"])(o,{key:0,type:r.tagType,onClick:r.startEditing,size:"small"},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.objectName),1)]})),_:1},8,["type","onClick"]))}function H(e,t,n,r,a,c){var o=Object(i["N"])("n-select");return Object(i["G"])(),Object(i["i"])(o,{value:r.currentObject,"onUpdate:value":t[0]||(t[0]=function(e){return r.currentObject=e}),ref:"instance",filterable:"",options:r.options,size:"tiny","show-arrow":!1,class:"entity-list-select","consistent-menu-width":!1,onBlur:r.accept,onKeydown:r.handleKey},null,8,["value","options","onBlur","onKeydown"])}var Q={props:{objectName:{type:String,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept","cancel"],setup:function(e,t){var n=[];e.availableObjects.forEach((function(e){n.push({label:e,value:e,style:{"font-size":"12px"}})}));var a=Object(r["f"])(e.objectName),i=Object(r["f"])(null);Object(r["e"])((function(){var e;null===(e=i.value)||void 0===e||e.focus()}));var c=function(){a.value!==e.objectName?t.emit("accept",a.value):t.emit("cancel")},o=function(){t.emit("cancel")};return{options:n,currentObject:a,instance:i,accept:c,cancel:o,handleKey:function(e){switch(e.key){case"Enter":c();break;case"Escape":o();break}}}}};const Y=L()(Q,[["render",H]]);var Z=Y,ee={props:{objectName:{type:String,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1},dimension:{type:Number,required:!0},availableObjects:{type:Array,required:!0}},emits:["accept"],components:{"entity-list-relationship-object-input":Z},setup:function(e,t){var n=Object(r["a"])((function(){return e.objectNamesClash?"error":"default"})),a=Object(r["f"])(!1);return{tagType:n,editing:a,startEditing:function(){a.value=!0},accept:function(n){a.value=!1,t.emit("accept",{dimension:e.dimension,objectName:n})},hideInput:function(){a.value=!1}}}};const te=L()(ee,[["render",X]]);var ne=te,re={props:{objects:{type:Array,required:!0},originalObjects:{type:Array,required:!0},relationshipId:{type:Number,required:!1},availableObjects:{type:Array,required:!0},objectNamesClash:{type:Boolean,required:!1,default:!1}},emits:["objectsUpdate"],components:{"entity-list-relationship-object":ne},setup:function(e,t){return{emitObjectsUpdate:function(n){var r=[];e.objects.forEach((function(e,t){t!==n.dimension?r.push(e):r.push(n.objectName)}));var a=null!==e.originalObjects?e.originalObjects:e.objects;t.emit("objectsUpdate",{id:e.relationshipId,previousEmblem:a,entityEmblem:r})}}}};const ae=L()(re,[["render",W]]);var ie=ae,ce=n("8e39"),oe=n("d6ec"),ue=Object(i["m"])(" Create ");function le(e,t,n,r,a,c){var o=Object(i["N"])("n-select"),u=Object(i["N"])("n-button"),l=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(l,{align:"baseline",size:"small"},{default:Object(i["V"])((function(){return[(Object(i["G"])(!0),Object(i["k"])(i["b"],null,Object(i["L"])(r.dimensions,(function(e){return Object(i["G"])(),Object(i["i"])(o,{key:e,options:r.options[e],filterable:"",placeholder:r.placeholderText(e),"show-arrow":!1,size:"tiny","consistent-menu-width":!1,"onUpdate:value":r.updateSelection,class:"entity-list-select"},null,8,["options","placeholder","onUpdate:value"])})),128)),Object(i["n"])(u,{onClick:r.emitRelationshipCreate,size:"tiny",disabled:!r.wellDefined},{default:Object(i["V"])((function(){return[ue]})),_:1},8,["onClick","disabled"])]})),_:1})}n("b2a6");function se(e){var t=[];return e.forEach((function(e,n){var r=[];e.forEach((function(e){r.push({label:e,value:e,dimension:n,style:{"font-size":"12px"}})})),t.push(r)})),t}var de={props:{availableObjects:{type:Array,required:!0}},emits:["relationshipCreate"],setup:function(e,t){var n=Object(G["a"])(Array(e.availableObjects.length).keys()),a=se(e.availableObjects),i=Array(e.availableObjects.length),c=Object(r["f"])(!1);return{dimensions:n,options:a,wellDefined:c,emitRelationshipCreate:function(){t.emit("relationshipCreate",i)},updateSelection:function(e,t){i[t.dimension]=e,i.forEach((function(e,t){void 0!==e&&t===i.length-1&&(c.value=!0)}))},placeholderText:function(e){var t=null;switch(e){case 0:t="st";break;case 1:t="nd";break;case 2:t="rd";break;default:t="th"}return"".concat(e+1).concat(t," object")}}}};const be=L()(de,[["render",le]]);var fe=be;function pe(e,t,n,r,a,i){var c={object_class_id:n};d["j"]("objects?",e,t,c).then(function(){var e=Object(M["a"])(Object(R["a"])().mark((function e(t){var n,i;return Object(R["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.objects,i=[],n.forEach((function(e){i.push({entityEmblem:e.name,entityId:e.id,key:e.name})})),r.value=i,a.value=J["a"].state.ready;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.value=e.message,a.value=J["a"].state.error}))}function je(e,t,n){var r={relationship_class_id:n};return d["j"]("available relationship objects?",e,t,r).then((function(e){return e.available_objects}))}function me(e,t,n,r,a,i,c,o){var u={relationship_class_id:n};d["j"]("relationships?",e,t,u).then(function(){var o=Object(M["a"])(Object(R["a"])().mark((function o(u){var l,s,d;return Object(R["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return l=u.relationships,s=new Map,l.forEach((function(e){var t=s.get(e.id);void 0===t&&(t=[],s.set(e.id,t)),t.push(e.object_name)})),o.next=5,je(e,t,n);case 5:a.value=o.sent,i("entityDimensionsReveal",a.value.length),d=[],s.forEach((function(e,t){d.push({entityEmblem:e,originalEmblem:Object(G["a"])(e),entityId:t,availableObjects:a,objectNamesClash:!1,key:e.join(",")})})),d.sort((function(e,t){for(var n=0;n<e.entityEmblem.length;++n){var r=e.entityEmblem[n].toUpperCase(),a=t.entityEmblem[n].toUpperCase();if(r!==a)return r<a?-1:1}return 0})),r.value=d,c.value=J["a"].state.ready;case 12:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){o.value=e.message,c.value=J["a"].state.error}))}function ve(e){return{entityEmblem:e.entityEmblem,entityId:e.entityId}}var Oe={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},inserted:{type:Object,required:!1}},emits:["entitySelect","entityInsert","entityUpdate","entityDelete","relationshipsClash","entityDimensionsReveal"],components:{fetchable:J["a"],"new-named-item-row":oe["a"],"entity-list-new-relationship-row":fe},setup:function(e,t){var n=Object(r["f"])(J["a"].state.loading),a=Object(r["f"])([]),i=Object(r["f"])(""),c=Object(r["f"])([]),o=Object(r["f"])([]),u=Object(s["a"])();Object(r["e"])((function(){1===e.classType?pe(e.projectId,e.modelUrl,e.classId,a,n,i):me(e.projectId,e.modelUrl,e.classId,a,o,t.emit,n,i)}));var l=function(e){for(var n=void 0,r=a.value.length-1;-1!=r;--r){var i=a.value[r];A(i.entityEmblem,e)&&(n=i.entityId,a.value.splice(r,1))}t.emit("entityDelete",{id:n,entityEmblem:e})},d=function(e){var n=a.value.find((function(t){return e.entityEmblem===t.entityEmblem}));n?u.error({title:"Cannot rename",content:"An object with the same name already exists."}):(a.value.forEach((function(t){t.entityEmblem==e.previousEmblem&&(t.entityEmblem=e.entityEmblem)})),t.emit("entityUpdate",e))},b=function(e){var n,r=a.value.find((function(t){return K(e.entityEmblem,t.entityEmblem)})),i=void 0!==r,c=Object(D["a"])(a.value);try{for(c.s();!(n=c.n()).done;){var o=n.value;if(K(e.previousEmblem,o.originalEmblem)){o.objectNamesClash=i,o.entityEmblem=e.entityEmblem,i||(o.originalEmblem=Object(G["a"])(e.entityEmblem));break}}}catch(u){c.e(u)}finally{c.f()}t.emit("relationshipsClash",r),r||t.emit("entityUpdate",e)};return Object(r["i"])(Object(r["h"])(e).inserted,(function(n){n&&(a.value.forEach((function(t){var r=h(e.className,t.entityEmblem),a=n[r];void 0!==a&&(t.entityId=a)})),c.value.length=0,t.emit("entitySelect",null))})),{state:n,entityList:a,errorMessage:i,selectedKeys:c,availableObjects:o,renderLabel:function(t){return 1===e.classType?Object(r["c"])($,{objectName:t.option.entityEmblem,objectId:t.option.entityId,onRename:d}):Object(r["c"])(ie,{objects:t.option.entityEmblem,originalObjects:t.option.originalEmblem,relationshipId:t.option.entityId,availableObjects:t.option.availableObjects,objectNamesClash:t.option.objectNamesClash,onObjectsUpdate:b})},renderSuffix:function(e){return Object(r["c"])(ce["a"],{emblem:e.option.entityEmblem,onDelete:l})},emitEntitySelect:function(e,n){if(0!==e.length){var r=n[0];c.value=[r.key],t.emit("entitySelect",ve(r))}else c.value.length=0},addObject:function(e){var n=a.value.find((function(t){return e===t.entityEmblem}));if(n)u.error({title:"Cannot create",content:"An entity with the same name already exists."});else{var r={entityEmblem:e,entityId:void 0,key:e},i=a.value.findIndex((function(t){return e<t.entityEmblem}));a.value.splice(i>=0?i:a.value.length,0,r),t.emit("entityInsert",e),c.value=[r.key],t.emit("entitySelect",ve(r))}},addRelationship:function(e){var n=a.value.find((function(t){return K(e,t.entityEmblem)}));if(n)u.error({title:"Cannot create relationship",content:"A relationship with the same objects already exists."});else{var r=Object(G["a"])(e),i={entityEmblem:r,originalEmblem:Object(G["a"])(r),entityId:void 0,availableObjects:o,objectNamesClash:!1,key:e.join(",")},l=a.value.findIndex((function(t){return e[0]<t.entityEmblem}));a.value.splice(l>=0?l:a.value.length,0,i),t.emit("entityInsert",r),c.value=[i.key],t.emit("entitySelect",ve(i))}}}}};n("4258");const ye=L()(Oe,[["render",C]]);var he=ye;function ge(e,t,n,r,a,c){var o=Object(i["N"])("n-tree"),u=Object(i["N"])("fetchable");return Object(i["G"])(),Object(i["i"])(u,{state:r.state,"error-message":r.errorMessage},{default:Object(i["V"])((function(){return[Object(i["n"])(o,{selectable:"","block-node":"",data:r.alternatives,"selected-keys":r.selectedIds,"onUpdate:selectedKeys":r.emitSelected},null,8,["data","selected-keys","onUpdate:selectedKeys"])]})),_:1},8,["state","error-message"])}function Ee(e,t){return Object(d["j"])("make base alternative",e,t,{}).then((function(e){return e.alternatives}))}var Ne={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0}},emits:["alternativeSelect"],components:{fetchable:J["a"]},setup:function(e,t){var n=Object(r["f"])([]),a=Object(r["f"])([]),i=Object(r["f"])(J["a"].state.loading),c=Object(r["f"])("");return Object(r["e"])((function(){Object(d["j"])("alternatives?",e.projectId,e.modelUrl).then(function(){var t=Object(M["a"])(Object(R["a"])().mark((function t(r){var a,c,o;return Object(R["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==r.alternatives.length){t.next=4;break}return t.next=3,Ee(e.projectId,e.modelUrl);case 3:r.alternatives=t.sent;case 4:a=Object(D["a"])(r.alternatives);try{for(a.s();!(c=a.n()).done;)o=c.value,n.value.push({label:o.name,key:o.id})}catch(u){a.e(u)}finally{a.f()}i.value=J["a"].state.ready;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){i.value=J["a"].state.error,c.value=e.message}))})),{alternatives:n,selectedIds:a,state:i,errorMessage:c,emitSelected:function(e,n){var r=n[0];a.value=[r.key],t.emit("alternativeSelect",{alternativeId:r.key,alternativeName:r.label})}}}};const we=L()(Ne,[["render",ge]]);var ke=we,Ie=Object(i["m"])("â€•");function Ve(e,t,n,r,a,c){var o=Object(i["N"])("n-text"),u=Object(i["N"])("n-space"),l=Object(i["N"])("hand-point-left-regular"),s=Object(i["N"])("n-icon"),d=Object(i["N"])("n-empty"),b=Object(i["N"])("hand-paper-regular"),f=Object(i["N"])("n-data-table"),p=Object(i["N"])("n-result");return Object(i["G"])(),Object(i["i"])(u,{vertical:""},{default:Object(i["V"])((function(){return[Object(i["n"])(u,null,{default:Object(i["V"])((function(){return[Object(i["n"])(o,{strong:""},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(r.entityName),1)]})),_:1}),Object(i["n"])(o,null,{default:Object(i["V"])((function(){return[Ie]})),_:1}),Object(i["n"])(o,{italic:""},{default:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(r.alternativeName),1)]})),_:1})]})),_:1}),r.errorMessage?(Object(i["G"])(),Object(i["i"])(p,{key:1,status:"error",title:"Error",description:r.errorMessage},null,8,["description"])):(Object(i["G"])(),Object(i["i"])(f,{key:0,size:"tiny",columns:r.columns,data:r.data,loading:r.loading,"row-key":r.rowKey},{empty:Object(i["V"])((function(){return[null===n.entityKey?(Object(i["G"])(),Object(i["i"])(d,{key:0,description:"Select an entity on the left to load its parameters here."},{icon:Object(i["V"])((function(){return[Object(i["n"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(l)]})),_:1})]})),_:1})):(Object(i["G"])(),Object(i["i"])(d,{key:1,description:"Entity has no parameters."},{icon:Object(i["V"])((function(){return[Object(i["n"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(b)]})),_:1})]})),_:1}))]})),_:1},8,["columns","data","loading","row-key"]))]})),_:1})}n("3cef"),n("cf64");var Se=n("5ea7"),_e=n("70c6");function xe(e,t,n,r,a,c){var o=Object(i["N"])("n-tooltip");return Object(i["G"])(),Object(i["i"])(o,null,{trigger:Object(i["V"])((function(){return[Object(i["m"])(Object(i["O"])(n.name),1)]})),default:Object(i["V"])((function(){return[Object(i["m"])(" "+Object(i["O"])(n.description),1)]})),_:1})}var Ue={props:{name:{type:String,required:!0},description:{type:String,required:!1}}};const qe=L()(Ue,[["render",xe]]);var Ce=qe,De=Object(i["m"])(" Edit ");function Ge(e,t,n,r,a,c){var o=Object(i["N"])("n-select"),u=Object(i["N"])("n-input"),l=Object(i["N"])("n-button"),s=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(s,null,{default:Object(i["V"])((function(){return[Object(i["n"])(o,{options:r.species,value:r.currentSpecie,size:"tiny","consistent-menu-width":!1,"onUpdate:value":r.changeState},null,8,["options","value","onUpdate:value"]),"single value"===r.state?(Object(i["G"])(),Object(i["i"])(u,{key:0,value:r.currentValue,"onUpdate:value":r.changeSingleValue,size:"tiny"},null,8,["value","onUpdate:value"])):"value list"===r.state?(Object(i["G"])(),Object(i["i"])(o,{key:1,value:r.currentValue,options:r.valueOptions,size:"tiny","consistent-menu-width":!1,"onUpdate:value":r.changeSingleValue},null,8,["value","options","onUpdate:value"])):"indexed value"===r.state?(Object(i["G"])(),Object(i["i"])(l,{key:2,size:"tiny",onClick:r.emitOpenValueEditorRequest},{default:Object(i["V"])((function(){return[De]})),_:1},8,["onClick"])):Object(i["j"])("",!0)]})),_:1})}function Re(e){var t=[{label:"none",value:"none"}];return e.constant&&t.push({label:"constant",value:"constant"}),e.period&&t.push({label:"period",value:"period"}),e.time&&t.push({label:"time",value:"time"}),t}function Me(e,t){return"none"===e?"empty":"constant"===e?t?"value list":"single value":"indexed value"}function Ae(e){if(e){var t=[];return e.forEach((function(e){t.push({label:e,value:e})})),t}}function Ke(e,t,n,r,a){if("none"!==e){if("constant"!==e)return"object"===Object(j["a"])(n)?n:"object"===Object(j["a"])(r)?r:{type:"map",index_type:"str",index_name:e,data:[["T0001",0]]};switch(Object(j["a"])(n)){case"string":return n;case"number":return new String(n);default:return"constant"===t?null!==r?new String(r):"":a?a[0]:""}}}var Je={props:{valueData:{type:Object,required:!0},valueId:{type:Number,required:!1}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],setup:function(e,t){var n=Object(r["f"])(Re(e.valueData.allowedSpecies)),a=Object(r["f"])(Me(e.valueData.specie,e.valueData.allowedValues)),i=Object(r["f"])(e.valueData.specie),c=Object(r["f"])(Ke(e.valueData.specie,e.valueData.specie,e.valueData.parameterValue,e.valueData.parameterValue,e.valueData.allowedValues)),o=Object(r["f"])(Ae(e.valueData.allowedValues));return Object(r["i"])(Object(r["h"])(e).valueData,(function(e){n.value=Re(e.allowedSpecies),a.value=Me(e.specie,e.allowedValues),i.value=e.specie,c.value=Ke(e.specie,e.specie,e.parameterValue,e.parameterValue,e.allowedValues),o.value=Ae(e.allowedValues)})),{species:n,state:a,currentSpecie:i,currentValue:c,valueOptions:o,changeState:function(n){i.value=n;var r=Me(n,e.valueData.allowedValues);"indexed value"===a.value&&t.emit("closeValueEditorRequest"),a.value=r;var o=Ke(n,e.valueData.specie,c.value,e.valueData.parameterValue,e.valueData.allowedValues);if(void 0===o)t.emit("valueDelete",{id:e.valueId});else{var u="object"===Object(j["a"])(o),l=u?o:O(o);void 0===e.valueId?t.emit("valueInsert",{value:l}):t.emit("valueUpdate",{id:e.valueId,value:l})}c.value=o},changeSingleValue:function(n){var r=O(n);void 0===e.valueId?t.emit("valueInsert",{value:r}):t.emit("valueUpdate",{id:e.valueId,value:r}),c.value=n},emitOpenValueEditorRequest:function(){t.emit("openValueEditorRequest",{valueId:e.valueId,parameterValue:c})}}}};const Pe=L()(Je,[["render",Ge]]);var Fe=Pe;function ze(e,t){var n={title:"Parameter",key:"name",render:function(e){return Object(r["c"])(Ce,{name:e.name,description:e.description})}},a=function(t,n){return void 0===t.id?Object(u["a"])({entityEmblem:e.value.entityEmblem,definitionId:n.definitionId,alternativeId:e.value.alternativeId},t):Object(u["a"])({entityEmblem:e.value.entityEmblem},t)},i={title:"Value",key:"value",render:function(n){return Object(r["c"])(Fe,{valueData:{allowedSpecies:n.allowedSpecies,specie:n.specie,parameterValue:n.value,allowedValues:n.allowedValues},valueId:n.valueId,onOpenValueEditorRequest:function(r){t.emit("openValueEditorRequest",{value:r.parameterValue,valueId:r.valueId,entityEmblem:e.value.entityEmblem,parameterName:n.name,definitionId:n.definitionId,alternativeId:e.value.alternativeId})},onCloseValueEditorRequest:function(){t.emit("closeValueEditorRequest",n.name)},onValueInsert:function(e){t.emit("valueInsert",a(e,n))},onValueUpdate:function(e){t.emit("valueUpdate",a(e,n))},onValueDelete:function(e){t.emit("valueDelete",a(e,n))}})}};return[n,i]}var Te=/constant[^.]*\.?$/i,Le=/period[^.]*\.?$/i,Be=/time[^.]*\.?$/i;function $e(e){var t=Le.test(e),n=Be.test(e),r=Te.test(e)||!t&&!n;return{constant:r,period:t,time:n}}function We(e,t){return"object"!==Object(j["a"])(e)||null===e||"map"!==e.type&&"array"!==e.type&&!("content"in e)?"constant":"period"===e.index_name&&t.period?"period":"time"===e.index_name&&t.time?"time":"period"}function Xe(e,t,n,r){n.forEach((function(n){if(r.isPendingDeletion(e,n.definitionId,t))return n.specie=void 0,void(n.value=void 0);var a=r.pendingValue(e,n.definitionId,t);void 0!==a&&(n.specie=We(a,n.allowedSpecies),n.value=a)}))}function He(e,t,n){return d["j"]("parameter definitions?",e,t,{class_id:n}).then((function(e){return e.definitions}))}function Qe(e,t,n){return He(e,t,n).then(function(){var n=Object(M["a"])(Object(R["a"])().mark((function n(r){var a,i,c;return Object(R["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=[],i=new Map,r.forEach((function(e){var t={};t.name=e.name,t.description=e.description,t.definitionId=e.id,t.allowedSpecies=$e(e.description),t.specie="none",e.parameter_value_list_id&&i.set(e.id,e.parameter_value_list_id),a.push(t)})),!(i.size>0)){n.next=8;break}return n.next=6,d["j"]("parameter value lists?",e,t,{value_list_ids:Object(G["a"])(i.values())}).then((function(e){return e.lists}));case 6:c=n.sent,a.forEach((function(e){var t=i.get(e.definitionId);if(t){var n=c.find((function(e){return t===e.id}));e.allowedValues=n.value_list.map((function(e){return JSON.parse(e)}))}}));case 8:return n.abrupt("return",a);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}function Ye(e,t,n,r,a,i,c,o,l,s,b){null===e.promise&&(e.promise=Qe(r,a,i)),e.promise.then((function(e){var n=[];e.forEach((function(e){n.push(Object(u["a"])({},e))})),void 0===o?(Xe(c,l,n,s),t.value=n):d["j"]("parameter values?",r,a,{entity_id:o,alternative_id:l}).then(function(){var e=Object(M["a"])(Object(R["a"])().mark((function e(r){return Object(R["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.values.forEach((function(e){var t=n.find((function(t){return e.parameter_definition_id===t.definitionId})),r=JSON.parse(e.value);null!==r&&"object"===Object(j["a"])(r)&&(r.type=e.type),t.value=r,t.specie=We(r,t.allowedSpecies),t.valueId=e.id})),Xe(c,l,n,s),t.value=n;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){b.value=e.message})).finally((function(){n.value=!1}))}var Ze={props:{projectId:{type:Number,required:!0},modelUrl:{type:String,required:!0},classId:{type:Number,required:!0},entityKey:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["openValueEditorRequest","closeValueEditorRequest","valueInsert","valueUpdate","valueDelete"],components:{"hand-paper-regular":Se["a"],"hand-point-left-regular":_e["a"]},setup:function(e,t){var n=Object(r["h"])(e),a=n.entityKey,i=Object(r["f"])(ze(a,t)),c=Object(r["f"])([]),o=Object(r["f"])(!1),u=Object(r["f"])(""),l={promise:null},s=Object(r["a"])((function(){return null===e.entityKey?"":"string"===typeof e.entityKey.entityEmblem?e.entityKey.entityEmblem:e.entityKey.entityEmblem.join(" | ")})),d=Object(r["a"])((function(){return null!==e.entityKey?e.entityKey.alternativeName:""}));return Object(r["i"])(a,(function(t){null!==t?(o.value=!0,Ye(l,c,o,e.projectId,e.modelUrl,e.classId,t.entityEmblem,t.entityId,t.alternativeId,e.diff,u)):c.value.length=0})),{columns:i,data:c,loading:o,errorMessage:u,entityName:s,alternativeName:d,rowKey:function(e){return e.definitionId}}}};const et=L()(Ze,[["render",Ve]]);var tt=et,nt={key:0,strong:""},rt={key:1};function at(e,t,n,r,a,c){var o=Object(i["N"])("n-input"),u=Object(i["N"])("n-space");return Object(i["G"])(),Object(i["i"])(u,{vertical:""},{default:Object(i["V"])((function(){return[r.disabled?(Object(i["G"])(),Object(i["k"])("text",rt," - ")):(Object(i["G"])(),Object(i["k"])("text",nt,Object(i["O"])(r.parameterName)+"("+Object(i["O"])(r.indexName)+") ",1)),Object(i["n"])(o,{disabled:r.disabled,value:r.content,type:"textarea",placeholder:"index value",rows:20,"onUpdate:value":r.updateContent},null,8,["disabled","value","onUpdate:value"])]})),_:1})}function it(e){var t=e.index_name;return void 0!==t?t:"x"}function ct(e){if("content"in e)return e.content;var t="";if("map"===e.type)if(Array.isArray(e.data))e.data.forEach((function(e){t=t+"".concat(e[0],"\t").concat(e[1])+"\n"}));else for(var n in e.data)t=t+"".concat(n,"\t").concat(e.data[n])+"\n";else e.data.forEach((function(e){t+="".concat(e,"\n")}));return t}function ot(e,t){return{index_name:t,content:e}}var ut={props:{valueData:{type:[Object,null],required:!0},diff:{type:Object,required:!0}},emits:["valueUpdate"],setup:function(e,t){var n=Object(r["f"])(!0),a=Object(r["f"])(""),i=Object(r["f"])(""),c=Object(r["f"])("");return Object(r["i"])(Object(r["h"])(e).valueData,(function(t){if(null===t)return n.value=!0,a.value="",i.value="",void(c.value="");n.value=!1,i.value=t.parameterName;var r=e.diff.pendingValue(t.entityEmblem,t.definitionId,t.alternativeId);void 0===r?(a.value=it(t.value),c.value=ct(t.value)):void 0!==r.contest?(a.value=r.index_name,c.value=r.content):(a.value=it(r),c.value=ct(r))})),{disabled:n,indexName:a,parameterName:i,content:c,updateContent:function(n){c.value=n;var r={value:ot(n,a.value),id:e.valueData.valueId,entityEmblem:e.valueData.entityEmblem,definitionId:e.valueData.definitionId,alternativeId:e.valueData.alternativeId};t.emit("valueUpdate",r)}}}};const lt=L()(ut,[["render",at]]);var st=lt,dt=n("9973"),bt=n("c46e"),ft={props:{indexUrl:{type:String,required:!0},projectUrl:{type:String,required:!0},projectName:{type:String,required:!0},projectId:{type:Number,required:!0},editUrl:{type:String,required:!0},runUrl:{type:String,required:!0},resultsUrl:{type:String,required:!0},classId:{type:Number,required:!0},className:{type:String,required:!0},classType:{type:Number,required:!0},classDescription:{type:String,required:!0},modelUrl:{type:String,required:!0},logoutUrl:{type:String,required:!0},logoUrl:{type:String,required:!0}},components:{"alternative-selection":ke,"commit-button":q["a"],"entity-list":he,"indexed-value-editor":st,page:dt["a"],"page-path":bt["a"],"parameter-table":tt},setup:function(e){var t=Object(r["f"])(null),n=Object(r["f"])(!1),a=Object(r["f"])(""),i=Object(r["f"])(!1),c=Object(r["f"])({}),o=new x(e.classId,e.className),b=Object(r["f"])(null),f=Object(r["f"])(null),p=Object(r["f"])(1),j=Object(r["a"])((function(){return 1==e.classType?"Objects":"Relationships"})),m=Object(r["a"])((function(){return"".concat(10+Math.max(20,10*p.value),"em")})),v=Object(l["a"])(),O=Object(s["a"])();return Object(r["i"])(i,U["a"]),{currentEntityKey:Object(r["a"])((function(){return null===b.value||null===f.value?null:Object(u["a"])(Object(u["a"])({},b.value),f.value)})),valueEditorData:t,committing:n,commitErrorMessage:a,pendingChanges:i,insertedEntities:c,pendingModelChanges:o,entityTypeName:j,siderWidth:m,setValueEditorData:function(e){t.value=e},possiblyClearValueEditor:function(e){t.value&&t.value.parameterName===e&&(t.value=null)},storeEntityInsertion:function(e){o.insertEntity(e),i.value=!0},storeEntityUpdate:function(e){o.updateEntity(e.previousEmblem,e.id,e.entityEmblem),i.value=!0},storeEntityDeletion:function(e){o.deleteEntity(e.id,e.entityEmblem),i.value=o.isPending()},storeValueInsertion:function(e){o.insertValue(e.value,e.entityEmblem,e.definitionId,e.alternativeId),i.value=!0},storeValueUpdate:function(e){o.updateValue(e.value,e.id,e.entityEmblem,e.definitionId,e.alternativeId),i.value=!0},storeValueDeletion:function(e){o.deleteValue(e.id,e.entityEmblem,e.definitionId,e.alternativeId),i.value=o.isPending()},commit:function(){n.value=!0;var t=o.makeCommitData();d["c"](t,"Modified entities.",e.projectId,e.modelUrl).then((function(e){e.inserted&&(e.inserted.object?c.value=e.inserted.object:e.inserted.relationship&&(c.value=e.inserted.relationship)),v.success("Commit successful."),i.value=!1})).catch((function(e){O.error({title:"Commit failure",content:e.message})})).finally((function(){o.clearPending(),n.value=!1}))},setRelationshipsClashErrorState:function(e){a.value=e?"Cannot commit: some relationships have the same objects.":""},setEntityDimensions:function(e){p.value=e},setSelectedEntity:function(e){b.value=e,t.value=null},setSelectedAlternative:function(e){f.value=e,t.value=null}}}};n("bc2a");const pt=L()(ft,[["render",o]]);var jt=pt,mt=r["b"]({});mt.use(a["a"]),mt.component("entities-app",jt),mt.mount("#entities-app")},c46e:function(e,t,n){"use strict";n("a01d");var r=n("649f");function a(e,t,n,a,i,c){var o=Object(r["N"])("n-breadcrumb-item"),u=Object(r["N"])("n-breadcrumb");return Object(r["G"])(),Object(r["i"])(u,null,{default:Object(r["V"])((function(){return[(Object(r["G"])(!0),Object(r["k"])(r["b"],null,Object(r["L"])(n.path,(function(e,t){return Object(r["G"])(),Object(r["i"])(o,{href:e.url,key:t},{default:Object(r["V"])((function(){return[Object(r["m"])(Object(r["O"])(e.name),1)]})),_:2},1032,["href"])})),128)),Object(r["n"])(o,null,{default:Object(r["V"])((function(){return[Object(r["m"])(Object(r["O"])(n.leafName),1)]})),_:1})]})),_:1})}var i={props:{path:Array,leafName:String}},c=n("e582"),o=n.n(c);const u=o()(i,[["render",a]]);t["a"]=u},c593:function(e,t,n){},d6ec:function(e,t,n){"use strict";var r=n("649f"),a=Object(r["m"])(" Create ");function i(e,t,n,i,c,o){var u=Object(r["N"])("n-input"),l=Object(r["N"])("n-button"),s=Object(r["N"])("n-space");return Object(r["G"])(),Object(r["i"])(s,null,{default:Object(r["V"])((function(){return[Object(r["n"])(u,{clearable:"",placeholder:i.placeholder,value:i.currentName,"onUpdate:value":t[0]||(t[0]=function(e){return i.currentName=e}),size:"tiny"},null,8,["placeholder","value"]),Object(r["n"])(l,{onClick:i.emitCreate,size:"tiny"},{default:Object(r["V"])((function(){return[a]})),_:1},8,["onClick"])]})),_:1})}n("0151"),n("ca00"),n("3cef"),n("b581");var c=n("a8ce"),o=n("a253"),u={props:{itemName:{type:String,required:!0}},emits:["create"],setup:function(e,t){var n=Object(c["f"])(""),r="Enter ".concat(e.itemName," name"),a=Object(o["a"])();return{currentName:n,placeholder:r,emitCreate:function(){var r=new String(n.value).trim();if(r){var i=/[,]/;if(i.test(r)){var c=e.itemName.charAt(0).toUpperCase()+e.itemName.slice(1);a.error("".concat(c," name contains invalid special characters."))}else t.emit("create",r),n.value=""}else a.error("Please enter name for the new ".concat(e.itemName,"."))}}}},l=n("e582"),s=n.n(l);const d=s()(u,[["render",i]]);t["a"]=d},f77a:function(e,t,n){"use strict";var r=n("649f"),a=Object(r["m"])(" Commit "),i=Object(r["m"])(" There are pending changes. "),c=Object(r["m"])(" Nothing to commit. ");function o(e,t,n,o,u,l){var s=Object(r["N"])("n-button"),d=Object(r["N"])("n-text"),b=Object(r["N"])("n-space");return Object(r["G"])(),Object(r["i"])(b,{align:"baseline"},{default:Object(r["V"])((function(){return[Object(r["n"])(s,{disabled:o.buttonDisabled,loading:n.committing,onClick:o.emitCommitRequest},{default:Object(r["V"])((function(){return[a]})),_:1},8,["disabled","loading","onClick"]),n.errorMessage?(Object(r["G"])(),Object(r["i"])(d,{key:0,type:"error"},{default:Object(r["V"])((function(){return[Object(r["m"])(Object(r["O"])(n.errorMessage),1)]})),_:1})):n.hasPendingChanges?(Object(r["G"])(),Object(r["i"])(d,{key:1},{default:Object(r["V"])((function(){return[i]})),_:1})):(Object(r["G"])(),Object(r["i"])(d,{key:2},{default:Object(r["V"])((function(){return[c]})),_:1}))]})),_:1})}var u=n("a8ce"),l={props:{hasPendingChanges:{type:Boolean,required:!0},committing:{type:Boolean,required:!0},errorMessage:{type:String,required:!1,default:""}},emit:["commitRequest"],setup:function(e,t){var n=Object(u["a"])((function(){return!e.hasPendingChanges||0!==e.errorMessage.length}));return{buttonDisabled:n,emitCommitRequest:function(){t.emit("commitRequest")}}}},s=n("e582"),d=n.n(s);const b=d()(l,[["render",o]]);t["a"]=b}});